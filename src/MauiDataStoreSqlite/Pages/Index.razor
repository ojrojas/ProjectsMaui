@page "/"
@inject ITaskService _taskService;
@inject IGroupService _groupService;
<h1>Principal</h1>

<table class="table table-striped table-hover table-sm">
    <thead>
        <tr style="display:flex">
            <th style="flex:1">
                Select
            </th>
            <th style="flex:4">
                Name
            </th>
        </tr>
    </thead>
    <tbody>
        @if(_tasks.Any())
        {
           foreach(var task in _tasks)
           {
             <tr style="display:flex">
                 <td style="flex:1">@task.Id.ToString().Substring(0, 6)</td>
                 <td style="flex:4">@task.Name</td>
             </tr>
           }
        }
    </tbody>
</table>


@code {
    private IEnumerable<MauiDataStoreSqlite.Core.Entities.Task> _tasks = new List<MauiDataStoreSqlite.Core.Entities.Task>();
    protected override async Task OnInitializedAsync()
    {
        await LoadDataTasksAndGroupsAsync();
    }

    private async Task LoadDataTasksAndGroupsAsync()
    {
        _tasks = await _taskService.GetAllTaskAsync(default);
    }
}